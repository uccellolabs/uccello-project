webpackJsonp([3],{2:function(e,t,n){e.exports=n("22iK")},"22iK":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t=n("hHRx"),a=n("dwxp"),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();new(function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.lazyLoad()}return i(n,[{key:"lazyLoad",value:function(){switch(e('meta[name="page"]').attr("content")){case"module-manager":new t.a;break;case"menu-manager":new a.a}}}]),n}())}.call(t,n("7t+N"))},dwxp:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var r=n("M4fF"),o=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.initMenus(),this.initListeners()}return i(t,[{key:"initMenus",value:function(){var t=this;this.itemsNumber=0,this.initMenuHtml("main-menu-structure","menu-main"),this.initMenuHtml("admin-menu-structure","menu-admin"),e(".menu-manager").nestable({maxDepth:3}),this.menuToJson(),e(".menu-manager").on("change",function(e){t.menuToJson(),t.save()})}},{key:"initMenuHtml",value:function(t,n){var i=JSON.parse(e("meta[name='"+t+"']").attr("content"));if("object"===(void 0===i?"undefined":a(i))){var r="",o=!0,u=!1,l=void 0;try{for(var s,c=i[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var d=s.value;r+=this.buildItem(d)}}catch(e){u=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(u)throw l}}e(".menu-manager."+n+" ol.dd-list:first").html(r)}}},{key:"initListeners",value:function(){this.initSaveGroupButtonListener(),this.initSaveRouteLinkButtonListener(),this.initSaveLinkButtonListener(),this.initMenuSwitcherListener(),this.initEditButtonListener(),this.initRemoveButtonListener(),this.initActionsButtonsListener()}},{key:"initMenuSwitcherListener",value:function(){var t=this;e("input#menu-switcher").on("change",function(n){var a=e(n.currentTarget).is(":checked"),i=JSON.parse(e("a.btn-reset").attr("data-config"));a?(e(".menu-manager.menu-admin").show(),e(".menu-manager.menu-main").hide(),i.ajax.params={type:"admin"}):(e(".menu-manager.menu-admin").hide(),e(".menu-manager.menu-main").show(),i.ajax.params={type:"main"}),e("a.btn-reset").attr("data-config",JSON.stringify(i)),t.menuToJson()})}},{key:"menuToJson",value:function(){this.menuStructure=JSON.stringify(e(".menu-manager:visible").nestable("serialize"))}},{key:"save",value:function(){var t=e("meta[name='save-url']").attr("content");e.ajax({url:t,method:"post",data:{_token:e("meta[name='csrf-token']").attr("content"),structure:this.menuStructure,type:e(".menu-manager:visible").data("type")}}).then(function(t){e("span.saved").fadeIn().delay(1e3).fadeOut()}).fail(function(e){swal("Impossible to save",e.message,"error")})}},{key:"initSaveGroupButtonListener",value:function(){var t=this;e("#save-group").on("click",function(n){var a=e("#groupModal input[name='label']"),i=e("#groupModal input[name='icon']"),r=a.val(),o=i.val();r?o?(t.saveGroup(r,o),e("#groupModal").modal("hide")):i.parent(".form-line").addClass(["focused","error"]):a.parent(".form-line").addClass(["focused","error"])})}},{key:"initSaveRouteLinkButtonListener",value:function(){var t=this;e("#save-route-link").on("click",function(n){var a=e("#routeLinkModal input[name='label']"),i=e("#routeLinkModal input[name='icon']"),r=e("#routeLinkModal input[name='module']"),o=e("#routeLinkModal input[name='route']"),u=a.val(),l=i.val(),s=r.val(),c=o.val();u?l?s?c?(t.saveRouteLink(u,l,s,c),e("#routeLinkModal").modal("hide")):o.parent(".form-line").addClass(["focused","error"]):r.parent(".form-line").addClass(["focused","error"]):i.parent(".form-line").addClass(["focused","error"]):a.parent(".form-line").addClass(["focused","error"])})}},{key:"initSaveLinkButtonListener",value:function(){var t=this;e("#save-link").on("click",function(n){var a=e("#linkModal input[name='label']"),i=e("#linkModal input[name='icon']"),r=e("#linkModal input[name='url']"),o=a.val(),u=i.val(),l=r.val();o?u?l?(t.saveLink(o,u,l),e("#linkModal").modal("hide")):r.parent(".form-line").addClass(["focused","error"]):i.parent(".form-line").addClass(["focused","error"]):a.parent(".form-line").addClass(["focused","error"])})}},{key:"initActionsButtonsListener",value:function(){var t=this;e(".btn-actions").on("click",function(){t.currentItem=null,t.currentItemJson=null,e(".modal input").val(""),e(".modal .form-line").removeClass("focused")})}},{key:"initEditButtonListener",value:function(){var t=this;e(".btn-edit").off("click"),e(".btn-edit").on("click",function(n){var a=e(n.currentTarget).parents("li:first"),i=e(a).data("id");t.currentItem=a,t.retrieveCurrentItemJsonById(i,JSON.parse(t.menuStructure));var r=void 0;switch(a.data("type")){case"group":r=e("#groupModal").modal("show"),e("input[name='label']",r).val(a.data("label")).parent().addClass("focused"),e("input[name='icon']",r).val(a.data("icon")).parent().addClass("focused");break;case"link":r=e("#linkModal").modal("show"),e("input[name='label']",r).val(a.data("label")).parent().addClass("focused"),e("input[name='icon']",r).val(a.data("icon")).parent().addClass("focused"),e("input[name='url']",r).val(a.data("url")).parent().addClass("focused");break;case"route":r=e("#routelinkModal").modal("show"),e("input[name='label']",r).val(a.data("label")).parent().addClass("focused"),e("input[name='icon']",r).val(a.data("icon")).parent().addClass("focused"),e("input[name='module']",r).val(a.data("module")).parent().addClass("focused"),e("input[name='route']",r).val(a.data("route")).parent().addClass("focused")}})}},{key:"initRemoveButtonListener",value:function(){var t=this;e(".btn-remove").off("click"),e(".btn-remove").on("click",function(n){var a=e(n.currentTarget).parents("li:first").data("id");t.retrieveCurrentItemJsonById(a,JSON.parse(t.menuStructure)),t.currentItemJson&&t.currentItemJson.children?swal("Remove children first!","Yan cannot delete an item with children.","error"):(e(".menu-manager:visible").nestable("remove",a),t.menuToJson(),t.save())})}},{key:"saveGroup",value:function(t,n){if(this.currentItem){if(null!==this.currentItemJson){this.currentItemJson.label=t,this.currentItemJson.icon=n,e(this.currentItem).attr("data-label",t).attr("data-icon",n),e(".icon-label:first",this.currentItem).text(t),e(".material-icons:first",this.currentItem).text(n),e(".menu-manager:visible").nestable("replace",this.currentItemJson);var a=e(this.currentItem).data("id");e("[data-id='"+a+"']").replaceWith(this.currentItem)}}else{var i=this.buildItem({type:"group",label:t,icon:n,color:"green"});e(".menu-manager:visible .dd-list:first").append(i)}e(".menu-manager:visible").trigger("change"),this.initEditButtonListener(),this.initRemoveButtonListener()}},{key:"saveRouteLink",value:function(t,n,a,i){if(this.currentItem){if(null!==this.currentItemJson){this.currentItemJson.label=t,this.currentItemJson.icon=n,this.currentItemJson.module=a,this.currentItemJson.route=i,e(this.currentItem).attr("data-label",t).attr("data-icon",n).attr("data-module",a).attr("data-route",i),e(".icon-label:first",this.currentItem).text(t),e(".material-icons:first",this.currentItem).text(n),e(".menu-manager:visible").nestable("replace",this.currentItemJson);var r=e(this.currentItem).data("id");e("[data-id='"+r+"']").replaceWith(this.currentItem)}}else{var o=this.buildItem({type:"route",module:a,label:t,icon:n,color:"red",route:i});e(".menu-manager:visible .dd-list:first").append(o)}e(".menu-manager:visible").trigger("change"),this.initEditButtonListener(),this.initRemoveButtonListener()}},{key:"saveLink",value:function(t,n,a){if(this.currentItem){if(null!==this.currentItemJson){this.currentItemJson.label=t,this.currentItemJson.icon=n,this.currentItemJson.url=a,e(this.currentItem).attr("data-label",t).attr("data-icon",n).attr("data-url",a),e(".icon-label:first",this.currentItem).text(t),e(".material-icons:first",this.currentItem).text(n),e(".menu-manager:visible").nestable("replace",this.currentItemJson);var i=e(this.currentItem).data("id");e("[data-id='"+i+"']").replaceWith(this.currentItem)}}else{var r=this.buildItem({type:"link",label:t,icon:n,color:"blue",url:a});e(".menu-manager:visible .dd-list:first").append(r)}e(".menu-manager:visible").trigger("change"),this.initEditButtonListener(),this.initRemoveButtonListener()}},{key:"retrieveCurrentItemJsonById",value:function(e,t,n){if("object"==(void 0===t?"undefined":a(t))){var i=!0,r=!1,o=void 0;try{for(var u,l=t[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value;if(s.id==e){this.currentItemJson=s,this.currentItemParentJson=n;break}s.children&&this.retrieveCurrentItemJsonById(e,s.children,s)}}catch(e){r=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}}}},{key:"buildItem",value:function(t){var n=this;this.itemsNumber++;var a="";"group"!==t.type&&(a="dd-nochildren");var i="";t.module&&(i='data-module="'+t.module+'"');var o="";t.url&&(o='data-url="'+t.url+'"');var u="";t.route&&(u='data-route="'+t.route+'"');var l="",s=t.label;t.translation&&(l='data-translation="'+t.translation+'"',s=t.translation);var c="";"module"!==t.type&&(c='<div class="dd3-actions">\n                        <i class="material-icons btn-edit">edit</i>\n                        <i class="material-icons btn-remove">delete</i>\n                    </div>');var d='<li class="dd-item dd3-item '+a+'" data-id="'+this.itemsNumber+'" '+i+" "+u+" "+o+' data-type="'+t.type+'" data-label="'+t.label+'" '+l+' data-icon="'+t.icon+'" data-nochildren="'+!!t.noChildren+'" data-color="'+t.color+'">\n                <div class="dd-handle dd3-content">\n                    <i class="material-icons">'+t.icon+'</i>\n                    <span class="icon-label">'+s+'</span>\n                    <span class="pull-right col-'+t.color+'">'+r.capitalize(t.type)+"</span>\n                </div>\n                "+c;return t.children&&(d+='<ol class="dd-list">',e.each(t.children,function(e,t){d+=n.buildItem(t)}),d+="</ol>"),d+="</li>"}}]),t}()}).call(t,n("7t+N"))},hHRx:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.initCheckboxListener()}return a(t,[{key:"initCheckboxListener",value:function(){var t=e('meta[name="domain"]').attr("content");e("input[type='checkbox'].module-activation").on("click",function(n){var a=n.currentTarget,i=laroute.route("uccello.settings.module.activation",{domain:t});e.post(i,{_token:e("meta[name='csrf-token']").attr("content"),src_module:e(a).data("module"),active:!0===e(a).is(":checked")?"1":"0"}).fail(function(e){swal("Error",null,"error")})})}}]),t}()}).call(t,n("7t+N"))}},[2]);